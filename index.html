<!doctype html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>TechVerse — Home</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/lucide@latest/dist/umd/lucide.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        /*
         * CORE VARIABLES (DARK MODE - DEFAULT)
         */
        :root {
            --bg: #020d1f;
            --blue-neon: #06a6ff;
            --accent: #8a49ff;
            --soft: #9fb7d8;
            --glass: rgba(255, 255, 255, 0.04);
            --card: rgba(255, 255, 255, 0.03);
            --maxw: 1200px;
            --text-primary: #dbe9ff;
            --text-secondary: #bcd6ff;
            --text-muted: #9fc9ff;
            --nav-bg: rgba(2, 13, 31, 0.98);
            --header-h: 72px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /*
         * LIGHT MODE OVERRIDES
         */
        html[data-theme="light"] {
            /* New Core Variables */
            --bg: #f4f9ff;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            /* Accent & Neon Colors (Darkened for better contrast on light BG) */
            --blue-neon: #007acc;
            --accent: #6a0dad;
            /* Backgrounds & Borders */
            --card: #ffffff;
            --glass: rgba(0, 0, 0, 0.1);
            --nav-bg: rgba(255, 255, 255, 0.95);
        }

        /*
         * GLOBAL RESETS & TYPOGRAPHY
         */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            transition: color 0.2s, background-color 0.2s, border-color 0.2s;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            /* Default Dark Mode Background */
            background: radial-gradient(1200px 600px at 70% 20%, rgba(6, 166, 255, 0.02), transparent),
                radial-gradient(1000px 500px at 30% 80%, rgba(138, 73, 255, 0.02), transparent),
                var(--bg);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* LIGHT MODE Body Background Override */
        html[data-theme="light"] body {
            background: radial-gradient(1200px 600px at 70% 20%, rgba(0, 122, 204, 0.04), transparent),
                radial-gradient(1000px 500px at 30% 80%, rgba(106, 13, 173, 0.04), transparent),
                var(--bg);
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--text-primary);
        }

        a {
            color: var(--blue-neon);
            text-decoration: none;
        }

        a:hover {
            color: var(--accent);
            text-decoration: underline;
        }

        .container {
            max-width: var(--maxw);
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* Essential RTL fixes */
        html[dir="rtl"] {
            /* Flip the background gradients for better visual balance (Dark Mode) */
            background: radial-gradient(1200px 600px at 30% 20%, rgba(6, 166, 255, 0.02), transparent),
                radial-gradient(1000px 500px at 70% 80%, rgba(138, 73, 255, 0.02), transparent),
                var(--bg);
            text-align: right;
        }

        /* LIGHT MODE RTL Body Background Override */
        html[data-theme="light"] html[dir="rtl"] {
            background: radial-gradient(1200px 600px at 30% 20%, rgba(0, 122, 204, 0.04), transparent),
                radial-gradient(1000px 500px at 70% 80%, rgba(106, 13, 173, 0.04), transparent),
                var(--bg);
        }

        /* Overrides for Light Mode Elements (General) */
        html[data-theme="light"] .section-title,
        html[data-theme="light"] .hero h2 {
            text-shadow: none;
        }

        html[data-theme="light"] .btn {
            color: #ffffff;
        }

        html[data-theme="light"] .brand-tile {
            /* Adjust brand tile background for lighter shades */
            background: linear-gradient(135deg, rgba(0, 122, 204, 0.1), rgba(106, 13, 173, 0.1));
            box-shadow: 0 6px 18px rgba(26, 32, 44, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.08);
        }


        /*
         * HEADER & NAVIGATION
         */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-h);
            display: flex;
            align-items: center;
            background: var(--nav-bg);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
            z-index: 1000;
        }

        html[data-theme="light"] header {
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .nav-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
            /* Adjust padding for fixed header */
            width: 100%;
            max-width: var(--maxw);
            margin: 0 auto;
        }

        .brand {
            display: flex;
            align-items: center;
            color: var(--text-primary);
            text-decoration: none;
            gap: 10px;
        }

        .brand h1 {
            font-size: 1.25rem;
            margin: 0;
        }

        .brand small {
            display: block;
            margin-top: -4px;
            font-size: 0.75rem;
            color: var(--soft);
        }

        .logo-mark {
            width: 30px;
            height: 30px;
            background: var(--blue-neon);
            border-radius: 50%;
            overflow: hidden;
        }

        .logo-mark img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        nav {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        nav a {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-weight: 500;
            padding: 8px 0;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        nav a:hover,
        nav a.active {
            color: var(--blue-neon);
            border-color: var(--blue-neon);
            text-decoration: none;
        }

        /* Language and Theme Controls */
        .controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .controls select {
            padding: 4px 8px;
            border-radius: 4px;
            background: var(--card);
            color: var(--text-primary);
            border: 1px solid var(--glass);
        }

        #themeToggle,
        #themeToggleMobile {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
            padding: 6px;
        }

        #themeToggle:hover,
        #themeToggleMobile:hover {
            color: var(--blue-neon);
        }

        .desktop-controls {
            display: flex;
        }

        .mobile-controls {
            display: none;
        }

        .mobile-menu-btn {
            display: none;
        }


        /*
         * MAIN CONTENT LAYOUT
         */
        main.container {
            padding-top: calc(var(--header-h) + 40px);
            /* Account for fixed header */
        }

        .section-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 40px;
            color: var(--blue-neon);
            text-shadow: 0 0 10px rgba(6, 166, 255, 0.3);
        }


        /*
         * HERO SECTION
         */
        .hero {
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 400px;
            padding: 60px 0;
        }

        .hero h2 {
            font-size: 3.5rem;
            line-height: 1.2;
            text-shadow: 0 0 15px rgba(138, 73, 255, 0.4);
        }

        /*
         * DATA GRIDS (News & Meetings)
         */
        .news-grid,
        .meet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 28px;
            margin-bottom: 40px;
        }

        .card,
        .about-card {
            padding: 24px;
            border-radius: 12px;
            background: var(--card);
            border: 1px solid var(--glass);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .card h4 a {
            color: var(--text-primary);
            font-size: 1.1rem;
            display: block;
            margin: 10px 0;
        }

        .card h4 a:hover {
            color: var(--blue-neon);
            text-decoration: none;
        }

        .card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .card .meta {
            font-size: 0.75rem;
            color: var(--soft);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Buttons */
        .btn {
            background-color: var(--blue-neon);
            color: var(--bg);
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            display: inline-block;
            transition: var(--transition);
        }

        .btn:hover {
            background-color: var(--accent);
            text-decoration: none;
        }

        .view-all {
            text-align: center;
            margin-top: 20px;
        }

        /*
         * ABOUT SECTION
         */
        .about-grid {
            display: flex;
            gap: 28px;
            flex-wrap: wrap;
            align-items: stretch;
            margin-bottom: 40px;
        }

        .about-card h4 {
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--accent);
            margin-bottom: 10px;
        }

        .brand-tile {
            flex: 0 0 220px;
            min-width: 220px;
            padding: 20px;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(6, 166, 255, 0.12), rgba(138, 73, 255, 0.10));
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.04);
            box-shadow: 0 6px 18px rgba(2, 13, 31, 0.4);
            font-size: 1.5rem;
        }

        /*
         * CONTACT FORM
         */
        .contact-form {
            max-width: 600px;
            margin: 0 auto;
            padding: 30px;
            background: var(--card);
            border-radius: 12px;
            border: 1px solid var(--glass);
        }

        .contact-form label {
            display: block;
            margin-top: 15px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .contact-form input,
        .contact-form textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 6px;
            border: 1px solid var(--glass);
            background: rgba(255, 255, 255, 0.02);
            color: var(--text-primary);
            font-family: 'Poppins', sans-serif;
            resize: vertical;
        }

        .contact-form input:focus,
        .contact-form textarea:focus {
            outline: none;
            border-color: var(--blue-neon);
            box-shadow: 0 0 5px rgba(6, 166, 255, 0.5);
        }

        /* Light Mode Input Overrides */
        html[data-theme="light"] .contact-form input,
        html[data-theme="light"] .contact-form textarea {
            background: #fcfdff;
            /* Slightly off-white for inputs */
            border: 1px solid var(--glass);
            /* Darker border */
        }

        html[data-theme="light"] .contact-form input:focus,
        html[data-theme="light"] .contact-form textarea:focus {
            box-shadow: 0 0 5px rgba(0, 122, 204, 0.5);
            /* Darker focus shadow */
        }


        #contactStatus {
            margin-top: 15px;
            font-weight: 600;
        }


        /*
         * FOOTER
         */
        footer {
            padding: 20px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.03);
            margin-top: 60px;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        html[data-theme="light"] footer {
            border-top: 1px solid rgba(0, 0, 0, 0.08);
        }


        /*
         * MOBILE / RESPONSIVENESS
         */
        @media (max-width: 900px) {
            .hero {
                flex-direction: column;
                text-align: center;
            }

            .hero h2 {
                font-size: 2.5rem;
                margin-bottom: 20px;
            }

            .nav-inner nav {
                /* Hide main nav on mobile */
                display: none;
                flex-direction: column;
                position: fixed;
                top: var(--header-h);
                left: 0;
                right: 0;
                height: calc(100vh - var(--header-h));
                background: var(--nav-bg);
                padding: 40px 24px;
                align-items: flex-start;
                z-index: 999;
                overflow-y: auto;
            }

            .nav-inner nav.open {
                display: flex;
            }

            .nav-inner nav a {
                width: 100%;
                padding: 12px 0;
                border-bottom: 1px solid var(--glass);
                font-size: 1.2rem;
            }

            .desktop-controls {
                display: none;
            }

            .mobile-controls {
                display: flex;
                margin-top: 30px;
                width: 100%;
                justify-content: space-between;
                border-top: 1px solid var(--glass);
                padding-top: 20px;
            }

            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                color: var(--text-primary);
                cursor: pointer;
                padding: 8px;
            }

            .about-grid .brand-tile {
                flex: 1 1 100%;
                /* Make the tile full width on small screens */
            }
        }
    </style>
</head>

<body>

    <div class="bg-layer" id="bgLayer"></div>

    <header>
        <div class="nav-inner container">
            <a href="#home" class="brand">
                <div class="logo-mark"><img src="/public/ChatGPT Image 21 أكتوبر 2025، 09_35_20 م.png"
                        alt="TechVerse Logo"></div>
                <div>
                    <h1>TechVerse</h1>
                    <small data-i18n="brand.tagline">Code • Meetings • Insights</small>
                </div>
            </a>

            <nav id="mainNav">
                <a href="#home" class="active" data-nav="home"><i data-lucide="home"></i><span
                        data-i18n="nav.home">Home</span></a>
                <a href="/news.html" data-nav="news"><i data-lucide="newspaper"></i><span
                        data-i18n="nav.news">News</span></a>
                <a href="/meetings.html" data-nav="meet"><i data-lucide="calendar"></i><span
                        data-i18n="nav.meetings">Meetings</span></a>
                <a href="/public/about.html" data-nav="about"><i data-lucide="info"></i><span
                        data-i18n="nav.about">About</span></a>
                <a href="/contact.html" data-nav="contact"><i data-lucide="mail"></i><span
                        data-i18n="nav.contact">Contact</span></a>
                <a href="public/id.html" data-nav="certificates">
                    <i data-lucide="award"></i>
                    <span data-i18n="nav.certificates">Certificates</span>
                </a>


                <div class="controls mobile-controls">
                    <button type="button" id="themeToggleMobile" aria-label="Toggle theme"></button>
                    <select id="langSelectMobile" aria-label="Select language">
                        <option value="en">English (EN)</option>
                        <option value="ar">العربية (AR)</option>
                    </select>
                </div>
            </nav>

            <div class="controls desktop-controls">
                <button type="button" id="themeToggle" aria-label="Toggle theme"><i data-lucide="sun"></i></button>
                <select id="langSelect" aria-label="Select language">
                    <option value="en">English (EN)</option>
                    <option value="ar">العربية (AR)</option>
                </select>
            </div>

            <button type="button" id="menuToggle" aria-label="Toggle menu" class="mobile-menu-btn"><i
                    data-lucide="menu"></i></button>
        </div>
    </header>

    <main class="container" id="home">

        <section class="hero" aria-label="Hero" data-aos="fade-down">
            <div class="hero-left">
                <h2 data-i18n="hero.title">TechVerse — where code meets the future</h2>
                <p style="margin-top: 15px; color: var(--text-secondary); max-width: 500px;">
                    Stay ahead with curated insights, innovative code solutions, and exclusive tech meetings.
                </p>
                <a href="/news.html" class="btn" style="margin-top: 25px;">Explore Insights</a>
            </div>
            <div class="hero-right" aria-hidden="false"></div>
        </section>

        <section id="news" data-aos="fade-up">
            <h3 class="section-title" data-i18n="sections.news">Latest Tech Insights</h3>
            <div class="news-grid" id="newsGrid">
                <div class="card">
                    <h4><a
                            href="https://www.mckinsey.com/capabilities/mckinsey-digital/our-insights/the-year-of-quantum-from-concept-to-reality-in-2025">The
                            Rise of Quantum Computing in 2025</a></h4>
                    <p>A deep dive into how quantum processors are moving from labs to data centers.</p>
                </div>
                <div class="card">
                    <h4><a
                            href="https://www.servicenow.com/community/developer-advocate-blog/upgrade-your-javascript-essential-es12-features-you-should-be/ba-p/3170832">Modernizing
                            JavaScript: Beyond ES12</a></h4>
                    <p>Exploring new syntax, performance optimizations, and the future of front-end architecture.</p>
                </div>
            </div>
            <div class="view-all"><a href="/news.html" class="btn btn-primary" style="margin-bottom: 20px;">View All
                    News</a></div>
        </section>

        <section id="meet" data-aos="fade-up">
            <h3 class="section-title" data-i18n="sections.meetings">Upcoming Meetings</h3>
            <div class="meet-grid" id="meetGrid">
                <div class="card">
                    <h4>Deep Learning Frameworks (Online)</h4>
                    <div class="meta"><i data-lucide="calendar" style="width:16px;height:16px"></i> Nov 15, 2025</div>
                </div>
                <div class="card">
                    <h4>Securing APIs with OAuth 2.0</h4>
                    <div class="meta"><i data-lucide="calendar" style="width:16px;height:16px"></i> Dec 01, 2025</div>
                </div>
            </div>
            <div class="view-all"><a href="/meetings.html" class="btn btn-primary" style="margin-bottom: 30px;">View All
                    Meetings</a></div>
        </section>

        <section id="about" data-aos="fade-up">
            <h3 class="section-title" data-i18n="sections.about">About TechVerse</h3>
            <div class="about-grid">

                <div class="about-card" data-aos="fade-up" data-aos-delay="100">
                    <h4><i data-lucide="rocket" style="width: 18px;"></i> Our Mission</h4>
                    <p data-i18n="about.main_desc">
                        TechVerse is a futuristic space where developers, creators, and innovators unite. We blend
                        **minimalism** and **power** to deliver knowledge that drives the digital future forward.
                    </p>
                    <p style="margin-top: 16px; font-size: 14px; color: var(--soft);" data-i18n="about.mission">
                        We democratize high-level technical knowledge and foster a global community of innovators.
                    </p>
                </div>

                <div class="about-card" data-aos="fade-up" data-aos-delay="200">
                    <h4><i data-lucide="code-2" style="width: 18px;"></i> Core Pillars</h4>
                    <h5
                        style="margin-top: 10px; color: var(--blue-neon); font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1.05rem;">
                        Code Mastery</h5>
                    <p style="font-size: 14px;" data-i18n="about.pillar1.desc">Focused guides and deep-dives into modern
                        programming languages, frameworks, and architecture patterns.</p>

                    <h5
                        style="margin-top: 12px; color: var(--blue-neon); font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1.05rem;">
                        Future Insights</h5>
                    <p style="font-size: 14px;" data-i18n="about.pillar2.desc">Curated news and analysis on AI, Quantum,
                        Web3, and emerging technologies.</p>
                </div>

                <div class="brand-tile" data-aos="fade-up" data-aos-delay="300" data-i18n="about.tile_motto">Code.
                    Create. Connect.</div>
            </div>
            <div class="view-all"><a href="/about.html" class="btn" style="margin-bottom: 30px;">Read Our Full Story</a>
            </div>
        </section>

        <section id="contact" data-aos="fade-up">
            <h3 class="section-title" data-i18n="sections.contact">Get in Touch</h3>
            <form class="contact-form" id="contactForm">
                <label data-i18n="contact.name_label" for="name">Your Name</label>
                <input type="text" id="name" name="name" data-i18n-placeholder="contact.name_placeholder"
                    placeholder="Your Name" required>

                <label data-i18n="contact.email_label" for="email" style="margin-top: 20px;">Your Email</label>
                <input type="email" id="email" name="email" placeholder="you@example.com" required>

                <label data-i18n="contact.message_label" for="message" style="margin-top: 20px;">Message</label>
                <textarea id="message" name="message" rows="5" placeholder="How can we help you?" required></textarea>

                <button type="submit" class="btn" style="width: 100%; margin-top: 25px;"><span
                        data-i18n="contact.send_button">Send Message</span></button>
                <div id="contactStatus" style="text-align: center; margin-top: 10px;"></div>
            </form>
        </section>

        <footer>
            <div style="text-align:center">© <strong>TechVerse</strong> — All rights reserved.</div>
        </footer>

    </main>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        // --- Centralized Language and Theme Script (RESOLVED) ---
        const html = document.documentElement;
        const langSelect = document.getElementById('langSelect');
        const langSelectMobile = document.getElementById('langSelectMobile');
        const themeToggle = document.getElementById('themeToggle');
        const themeToggleMobile = document.getElementById('themeToggleMobile');
        const savedLang = localStorage.getItem('lang') || 'en';

        // Mock Translations (these must be served by server.js at /locales/:lang.json)
        const mockTranslations = {
            'en': {
                'brand': { 'tagline': 'Code • Meetings • Insights' },
                'nav': { 'home': 'Home', 'news': 'News', 'meetings': 'Meetings', 'about': 'About', 'contact': 'Contact' },
                'hero': { 'title': 'TechVerse — where code meets the future' },
                'sections': { 'news': 'Latest Tech Insights', 'meetings': 'Upcoming Meetings', 'about': 'About TechVerse', 'contact': 'Get in Touch' },
                'contact': { 'name_placeholder': 'Your Name', 'name_label': 'Your Name', 'email_label': 'Your Email', 'message_label': 'Message', 'send_button': 'Send Message' },
            },
            'ar': {
                'brand': { 'tagline': 'تشفير • لقاءات • رؤى' },
                'nav': { 'home': 'الرئيسية', 'news': 'الأخبار', 'meetings': 'اللقاءات', 'about': 'من نحن', 'contact': 'اتصل بنا' },
                'hero': { 'title': 'تيك فيرس - حيث يلتقي الكود بالمستقبل' },
                'sections': { 'news': 'أحدث الرؤى التقنية', 'meetings': 'اللقاءات القادمة', 'about': 'عن تيك فيرس', 'contact': 'تواصل معنا' },
                'contact': { 'name_placeholder': 'اسمك', 'name_label': 'اسمك', 'email_label': 'بريدك الإلكتروني', 'message_label': 'رسالتك', 'send_button': 'إرسال الرسالة' },
            }
        };

        // 1. Language Loading Function (Uses mock data if server.js is not running, or fetch if it is)
        async function loadTranslations(lang) {
            let translations = mockTranslations[lang] || mockTranslations['en'];
            try {
                // Attempt to fetch from the server endpoint
                const res = await fetch(`/locales/${lang}.json`);
                if (res.ok) {
                    translations = await res.json();
                }
            } catch (err) {
                console.warn('Could not fetch translations, using local mock data.');
            }

            // Set HTML attributes
            html.lang = lang;
            html.dir = lang === 'ar' ? 'rtl' : 'ltr';

            // Apply translations
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                let value = translations;
                key.split('.').forEach(k => { if (value) value = value[k]; });
                if (value) el.textContent = value;
            });

            // Apply placeholder translations
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                let value = translations;
                key.split('.').forEach(k => { if (value) value = value[k]; });
                if (value) el.placeholder = value;
            });

            lucide.createIcons(); // Re-render icons after text/direction changes
            if (typeof setActiveNav === 'function') setActiveNav(); // Re-check active link
        }

        function setLanguage(l) {
            localStorage.setItem('lang', l);
            if (langSelect) langSelect.value = l;
            if (langSelectMobile) langSelectMobile.value = l;
            loadTranslations(l);
        }

        setLanguage(savedLang);

        if (langSelect) langSelect.addEventListener('change', (e) => setLanguage(e.target.value));
        if (langSelectMobile) langSelectMobile.addEventListener('change', (e) => setLanguage(e.target.value));


        // 2. Theme Toggle Function
        function getSavedTheme() { return localStorage.getItem('theme') || 'dark'; }
        html.setAttribute('data-theme', getSavedTheme());
        function updateThemeButton(toggleBtn) {
            const isLight = html.getAttribute('data-theme') === 'light';
            toggleBtn.innerHTML = isLight ? '<i data-lucide="moon"></i>' : '<i data-lucide="sun"></i>';
        }
        function updateThemeButtons() {
            if (themeToggle) updateThemeButton(themeToggle);
            if (themeToggleMobile) updateThemeButton(themeToggleMobile);
            lucide.createIcons();
        }
        updateThemeButtons();
        function handleThemeToggle() {
            const newTheme = (html.getAttribute('data-theme') === 'light') ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeButtons();
        }
        if (themeToggle) themeToggle.addEventListener('click', handleThemeToggle);
        if (themeToggleMobile) themeToggleMobile.addEventListener('click', handleThemeToggle);


        // 3. Mobile Menu Toggle
        const menuToggle = document.getElementById('menuToggle');
        const mainNav = document.getElementById('mainNav');
        if (menuToggle && mainNav) {
            menuToggle.addEventListener('click', () => {
                const isOpened = mainNav.classList.toggle('open');
                menuToggle.innerHTML = isOpened ? '<i data-lucide="x"></i>' : '<i data-lucide="menu"></i>';
                lucide.createIcons();
                document.body.style.overflowY = isOpened ? 'hidden' : 'auto';
            });
        }


        // 4. Data Loading (Placeholders are used, but the functions are defined for when you implement data fetching)
        async function loadNews() {
            // This function should fetch from /api/news and render the content into newsGrid
            // For now, it relies on the static placeholders in the HTML
            // Example fetch: const res = await fetch('/api/news');
        }

        async function loadMeetings() {
            // This function should fetch from /api/meetings and render the content into meetGrid
            // For now, it relies on the static placeholders in the HTML
            // Example fetch: const res = await fetch('/api/meetings');
        }

        loadNews();
        loadMeetings();


        // 5. Active Nav Scroll Logic (Improved to handle fixed header)
        const navLinks = document.querySelectorAll('nav a[data-nav]');
        function setActiveNav() {
            const headerHeight = 72;
            let fromTop = window.scrollY + headerHeight + 20; // Added extra 20px buffer

            navLinks.forEach(link => {
                // Only consider internal anchors
                const href = link.getAttribute('href');
                if (!href.startsWith('#')) return;

                const section = document.querySelector(href);
                if (!section) return;

                // Check if the current scroll position is within the section's bounds
                if (section.offsetTop <= fromTop && (section.offsetTop + section.offsetHeight) > fromTop) {
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                }

                // Special case: if at the very top, ensure 'home' is active
                if (window.scrollY < document.querySelector('#news').offsetTop - 10) {
                    document.querySelector('nav a[data-nav="home"]').classList.add('active');
                }
            });
        }
        window.addEventListener('scroll', setActiveNav);
        setActiveNav();


        // 6. Contact Form Logic (Simulation is used, replace with actual fetch to /api/contact)
        const contactForm = document.getElementById('contactForm');
        const contactStatus = document.getElementById('contactStatus');

        if (contactForm) {
            contactForm.addEventListener('submit', async (ev) => {
                ev.preventDefault();
                contactStatus.style.color = '';
                contactStatus.textContent = 'Sending...';

                // --- Replace this simulated code with a real fetch to /api/contact in a production environment ---
                const formData = {
                    name: contactForm.name.value,
                    email: contactForm.email.value,
                    message: contactForm.message.value
                };

                try {
                    // Simulated network delay
                    await new Promise(resolve => setTimeout(resolve, 800));

                    // You would replace the next three lines with a real fetch call:
                    // const res = await fetch('/api/contact', {method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(formData)});
                    // if (!res.ok) throw new Error('Server error');

                    contactStatus.style.color = 'var(--blue-neon)';
                    contactStatus.textContent = 'Thanks! Your message was sent (Simulated).';

                } catch (error) {
                    contactStatus.style.color = 'crimson';
                    contactStatus.textContent = 'Failed to send message (Simulated failure).';
                }

                setTimeout(() => { contactStatus.textContent = ''; }, 5000);
                contactForm.reset();
            });
        }


        // 7. AOS and Icon Initialization
        AOS.init({ duration: 800, once: true, easing: 'ease-out-cubic' });
        lucide.createIcons();
    </script>
</body>

</html>