<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tech Verse | Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
    --bg:#050507;
    --primary:#7b5cff;
    --accent:#5eead4;
    --glass:rgba(255,255,255,0.06);
    --text:#e5e7eb;
    --danger:#ff6b6b;
}

* { box-sizing:border-box; margin:0; padding:0; }

body {
    font-family: 'Cairo', sans-serif;
    background: radial-gradient(circle at top right, #1b123f, var(--bg));
    color: var(--text);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

.form-container {
    width: 100%;
    max-width: 700px;
    background: var(--glass);
    backdrop-filter: blur(20px);
    border-radius: 25px;
    border: 1px solid rgba(255,255,255,0.1);
    padding: 40px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.5);
    animation: fadeUp 0.6s ease;
}

@keyframes fadeUp {
    from {opacity:0; transform:translateY(20px);}
    to {opacity:1; transform:none;}
}

h1 { 
    color: var(--accent); 
    margin-bottom: 25px; 
    text-align: center; 
    font-weight: 900; 
}

.field-group { margin-bottom: 20px; }

label { 
    display: block; 
    margin-bottom: 8px; 
    font-size: 1rem; 
}

input[type="text"], input[type="email"], input[type="tel"], textarea, select {
    width: 100%;
    padding: 12px;
    background: rgba(0,0,0,0.3);
    border: 1px solid #333;
    border-radius: 12px;
    color: white;
    font-family: 'Cairo';
    outline: none;
    transition: 0.3s;
}

input:focus, textarea:focus { border-color: var(--primary); box-shadow: 0 0 10px rgba(123,92,255,0.2); }

.options-group { display: flex; flex-direction: column; gap: 10px; }

.option-item {
    background: rgba(255,255,255,0.03);
    padding: 10px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
}

.submit-btn {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, var(--primary), var(--accent));
    border: none;
    border-radius: 12px;
    color: #050507;
    font-weight: 900;
    font-size: 1.1rem;
    cursor: pointer;
    transition: 0.3s;
    margin-top: 15px;
}

.submit-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(94, 234, 212, 0.3);
}

#statusMsg {
    text-align: center;
    margin-top: 15px;
    font-size: 0.9rem;
}
</style>
</head>
<body>

<div class="form-container" id="mainForm">
    <h1 id="formTitle">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©...</h1>
    <form id="dynamicForm">
        <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®Øµ -->
        <div class="field-group">
            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
            <input type="text" name="name" required placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
        </div>
        <div class="field-group">
            <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input type="email" name="email" required placeholder="example@domain.com">
        </div>
        <div class="field-group">
            <label>Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³</label>
            <input type="tel" name="whatsapp" required placeholder="Ù…Ø«Ø§Ù„: 201234567890+">
        </div>

        <!-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© -->
        <div id="fieldsContainer"></div>

        <button type="submit" class="submit-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø¬Ø±Ø© ðŸš€</button>
    </form>
    <div id="statusMsg"></div>
</div>

<script>
const TG_TOKEN = "YOUR_BOT_TOKEN";
const TG_CHAT_ID = "YOUR_CHAT_ID";

const urlParams = new URLSearchParams(window.location.search);
const formTitleParam = urlParams.get('title');

async function loadForm() {
    try {
        const res = await fetch('/get-form-details?title=' + encodeURIComponent(formTitleParam));
        const formData = await res.json();

        document.getElementById('formTitle').innerText = formData.title;
        const container = document.getElementById('fieldsContainer');

        formData.questions.forEach((q,index)=>{
            const group = document.createElement('div');
            group.className = 'field-group';
            const labelStyle = q.isBold ? 'font-weight:900;color:var(--accent);' : '';
            group.innerHTML = `<label style="${labelStyle}">${q.label}</label>`;

            let inputHTML = '';
            if(q.type==='text'){
                inputHTML=`<input type="text" name="q${index}" required placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§...">`;
            } else if(q.type==='textarea'){
                inputHTML=`<textarea name="q${index}" rows="4" required placeholder="Ø§Ø³ØªÙÙŠØ¶ ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©..."></textarea>`;
            } else if(q.type==='radio'||q.type==='checkbox'){
                inputHTML=`<div class="options-group">`;
                q.options.forEach(opt=>{
                    inputHTML+=`<label class="option-item"><input type="${q.type}" name="q${index}" value="${opt.trim()}"> ${opt.trim()}</label>`;
                });
                inputHTML+='</div>';
            }

            group.innerHTML+=inputHTML;
            container.appendChild(group);
        });
    } catch(e){
        document.getElementById('formTitle').innerText="Ø®Ø·Ø£: Ø§Ù„ÙÙˆØ±Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!";
    }
}

document.getElementById('dynamicForm').onsubmit = async (e)=>{
    e.preventDefault();
    const btn=document.querySelector('.submit-btn');
    btn.innerText="Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";
    btn.disabled=true;

    const formData = new FormData(e.target);
    const responses = {};
    formData.forEach((val,key)=>responses[key]=val);

    try {
        // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¨ÙˆØª
        let msg=`ðŸš€ *Ù†Ù…ÙˆØ°Ø¬ Ø¬Ø¯ÙŠØ¯* \n`;
        msg+=`ðŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${responses.name}\n`;
        msg+=`ðŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: ${responses.email}\n`;
        msg+=`ðŸ“± ÙˆØ§ØªØ³: ${responses.whatsapp}\n`;
        msg+=`\nðŸ“„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª:\n`;
        Object.keys(responses).forEach(key=>{
            if(!['name','email','whatsapp'].includes(key)){
                msg+=`${key}: ${responses[key]}\n`;
            }
        });

        await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`,{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({chat_id:TG_CHAT_ID,text:msg,parse_mode:"Markdown"})
        });

        document.getElementById('mainForm').innerHTML = `
            <h1 style="color:var(--accent)">ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø¯Ùƒ! âœ…</h1>
            <p style="text-align:center">Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ Ù„Ù…Ø¬Ø±Ø© Tech Verse.</p>
            <a href="index.html" class="submit-btn" style="display:block; text-align:center; text-decoration:none; margin-top:20px;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        `;

    } catch(err){
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„!");
        btn.disabled=false;
        btn.innerText="Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø¬Ø±Ø© ðŸš€";
    }
};

loadForm();
</script>
</body>
</html>
